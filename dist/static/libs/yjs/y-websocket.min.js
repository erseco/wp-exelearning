(()=>{var He=Object.create;var z=Object.defineProperty;var Ye=Object.getOwnPropertyDescriptor;var ze=Object.getOwnPropertyNames;var Xe=Object.getPrototypeOf,$e=Object.prototype.hasOwnProperty;var i=(t,e)=>()=>(t&&(e=t(t=0)),e);var zt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ge=(t,e)=>{for(var s in e)z(t,s,{get:e[s],enumerable:!0})},Xt=(t,e,s,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of ze(e))!$e.call(t,o)&&o!==s&&z(t,o,{get:()=>e[o],enumerable:!(n=Ye(e,o))||n.enumerable});return t};var X=(t,e,s)=>(s=t!=null?He(Xe(t)):{},Xt(e||!t||!t.__esModule?z(s,"default",{value:t,enumerable:!0}):s,t)),We=t=>Xt(z({},"__esModule",{value:!0}),t);var V=zt((vs,l)=>{var h=typeof window<"u"&&window.Y?window.Y:V();l.exports=h;l.exports.default=h;l.exports.Doc=h.Doc;l.exports.Array=h.Array;l.exports.Map=h.Map;l.exports.Text=h.Text;l.exports.XmlFragment=h.XmlFragment;l.exports.XmlElement=h.XmlElement;l.exports.XmlText=h.XmlText;l.exports.applyUpdate=h.applyUpdate;l.exports.encodeStateAsUpdate=h.encodeStateAsUpdate;l.exports.encodeStateVector=h.encodeStateVector;l.exports.createAbsolutePositionFromRelativePosition=h.createAbsolutePositionFromRelativePosition;l.exports.createRelativePositionFromTypeIndex=h.createRelativePositionFromTypeIndex});var w,D,$=i(()=>{w=()=>new Map,D=(t,e,s)=>{let n=t.get(e);return n===void 0&&t.set(e,n=s()),n}});var R,ht=i(()=>{R=()=>new Set});var ut,Gt=i(()=>{ut=Array.from});var gt,qs,Hs,Ze,Je,Ke,ts,mt,es,k,ss,Wt,E,O=i(()=>{gt=String.fromCharCode,qs=String.fromCodePoint,Hs=gt(65535),Ze=t=>t.toLowerCase(),Je=/^\s*/g,Ke=t=>t.replace(Je,""),ts=/([A-Z])/g,mt=(t,e)=>Ke(t.replace(ts,s=>`${e}${Ze(s)}`)),es=t=>{let e=unescape(encodeURIComponent(t)),s=e.length,n=new Uint8Array(s);for(let o=0;o<s;o++)n[o]=e.codePointAt(o);return n},k=typeof TextEncoder<"u"?new TextEncoder:null,ss=t=>k.encode(t),Wt=k?ss:es,E=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});E&&E.decode(new Uint8Array).length===1&&(E=null)});var dt,Qt=i(()=>{dt=t=>t===void 0?null:t});var xt,Zt,yt,W,Jt,Kt,wt=i(()=>{xt=class{constructor(){this.map=new Map}setItem(e,s){this.map.set(e,s)}getItem(e){return this.map.get(e)}},Zt=new xt,yt=!0;try{typeof localStorage<"u"&&localStorage&&(Zt=localStorage,yt=!1)}catch{}W=Zt,Jt=t=>yt||addEventListener("storage",t),Kt=t=>yt||removeEventListener("storage",t)});var os,ee,bt,se,Ut=i(()=>{os=Object.keys,ee=(t,e)=>{let s=[];for(let n in t)s.push(e(t[n],n));return s},bt=t=>os(t).length,se=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)});var St,oe=i(()=>{St=Symbol("Equality")});var P,re,At=i(()=>{Ut();oe();P=(t,e)=>{if(t===e)return!0;if(t==null||e==null||t.constructor!==e.constructor)return!1;if(t[St]!=null)return t[St](e);switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;break}case Set:{if(t.size!==e.size)return!1;for(let s of t)if(!e.has(s))return!1;break}case Map:{if(t.size!==e.size)return!1;for(let s of t.keys())if(!e.has(s)||!P(t.get(s),e.get(s)))return!1;break}case Object:if(bt(t)!==bt(e))return!1;for(let s in t)if(!se(t,s)||!P(t[s],e[s]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(!P(t[s],e[s]))return!1;break;default:return!1}return!0},re=(t,e)=>e.includes(t)});var I,_t,zs,S,is,cs,It,Tt,ce,Xs,as,$s,Bt=i(()=>{$();O();Qt();wt();At();I=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",_t=typeof window<"u"&&typeof document<"u"&&!I,zs=typeof navigator<"u"?/Mac/.test(navigator.platform):!1,is=[],cs=()=>{if(S===void 0)if(I){S=w();let t=process.argv,e=null;for(let s=0;s<t.length;s++){let n=t[s];n[0]==="-"?(e!==null&&S.set(e,""),e=n):e!==null?(S.set(e,n),e=null):is.push(n)}e!==null&&S.set(e,"")}else typeof location=="object"?(S=w(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){let[e,s]=t.split("=");S.set(`--${mt(e,"-")}`,s),S.set(`-${mt(e,"-")}`,s)}})):S=w();return S},It=t=>cs().has(t),Tt=t=>I?dt(process.env[t.toUpperCase().replaceAll("-","_")]):dt(W.getItem(t)),ce=t=>It("--"+t)||Tt(t)!==null,Xs=ce("production"),as=I&&re(process.env.FORCE_COLOR,["true","1","2"]),$s=as||!It("--no-colors")&&!ce("no-color")&&(!I||process.stdout.isTTY)&&(!I||It("--color")||Tt("COLORTERM")!==null||(Tt("TERM")||"").includes("color"))});var M,Q,le,Gs,pe,j=i(()=>{M=Math.floor,Q=(t,e)=>t<e?t:e,le=(t,e)=>t>e?t:e,Gs=Number.isNaN,pe=Math.pow});var fe,Ws,Qs,Zs,Js,Ks,he=i(()=>{j();fe=Number.MAX_SAFE_INTEGER,Ws=Number.MIN_SAFE_INTEGER,Qs=1<<31,Zs=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&M(t)===t),Js=Number.isNaN,Ks=Number.parseInt});var Vt,u,K,p,J,c,Et,fs,hs,us,ue,gs,b,sn,tt=i(()=>{j();O();Vt=class{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}},u=()=>new Vt,K=t=>{let e=t.cpos;for(let s=0;s<t.bufs.length;s++)e+=t.bufs[s].length;return e},p=t=>{let e=new Uint8Array(K(t)),s=0;for(let n=0;n<t.bufs.length;n++){let o=t.bufs[n];e.set(o,s),s+=o.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),s),e},J=(t,e)=>{let s=t.cbuf.length;t.cpos===s&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(s*2),t.cpos=0),t.cbuf[t.cpos++]=e},c=(t,e)=>{for(;e>127;)J(t,128|127&e),e=M(e/128);J(t,127&e)},Et=new Uint8Array(3e4),fs=Et.length/3,hs=(t,e)=>{if(e.length<fs){let s=k.encodeInto(e,Et).written||0;c(t,s);for(let n=0;n<s;n++)J(t,Et[n])}else b(t,Wt(e))},us=(t,e)=>{let s=unescape(encodeURIComponent(e)),n=s.length;c(t,n);for(let o=0;o<n;o++)J(t,s.codePointAt(o))},ue=k&&k.encodeInto?hs:us,gs=(t,e)=>{let s=t.cbuf.length,n=t.cpos,o=Q(s-n,e.length),r=e.length-o;t.cbuf.set(e.subarray(0,o),n),t.cpos+=o,r>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(le(s*2,r)),t.cbuf.set(e.subarray(o)),t.cpos=r)},b=(t,e)=>{c(t,e.byteLength),gs(t,e)},sn=new DataView(new ArrayBuffer(4))});var Pt,ge=i(()=>{Pt=t=>new Error(t)});var ds,xs,Mt,et,ys,N,me,y,ws,bs,st,v=i(()=>{he();O();ge();ds=Pt("Unexpected end of array"),xs=Pt("Integer out of Range"),Mt=class{constructor(e){this.arr=e,this.pos=0}},et=t=>new Mt(t),ys=(t,e)=>{let s=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,s},N=t=>ys(t,y(t)),me=t=>t.arr[t.pos++],y=t=>{let e=0,s=1,n=t.arr.length;for(;t.pos<n;){let o=t.arr[t.pos++];if(e=e+(o&127)*s,s*=128,o<128)return e;if(e>fe)throw xs}throw ds},ws=t=>{let e=y(t);if(e===0)return"";{let s=String.fromCodePoint(me(t));if(--e<100)for(;e--;)s+=String.fromCodePoint(me(t));else for(;e>0;){let n=e<1e4?e:1e4,o=t.arr.subarray(t.pos,t.pos+n);t.pos+=n,s+=String.fromCodePoint.apply(null,o),e-=n}return decodeURIComponent(escape(s))}},bs=t=>E.decode(N(t)),st=E?bs:ws});var Us,Ss,de,As,Is,Ts,_s,xe,ye,we=i(()=>{O();Bt();Us=t=>new Uint8Array(t),Ss=(t,e,s)=>new Uint8Array(t,e,s),de=t=>new Uint8Array(t),As=t=>{let e="";for(let s=0;s<t.byteLength;s++)e+=gt(t[s]);return btoa(e)},Is=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("base64"),Ts=t=>{let e=atob(t),s=Us(e.length);for(let n=0;n<e.length;n++)s[n]=e.charCodeAt(n);return s},_s=t=>{let e=Buffer.from(t,"base64");return Ss(e.buffer,e.byteOffset,e.byteLength)},xe=_t?As:Is,ye=_t?Ts:_s});var be,Nt,Cs,Lt,Ue,Se,B,Ae=i(()=>{$();ht();we();wt();be=new Map,Nt=class{constructor(e){this.room=e,this.onmessage=null,this._onChange=s=>s.key===e&&this.onmessage!==null&&this.onmessage({data:ye(s.newValue||"")}),Jt(this._onChange)}postMessage(e){W.setItem(this.room,xe(de(e)))}close(){Kt(this._onChange)}},Cs=typeof BroadcastChannel>"u"?Nt:BroadcastChannel,Lt=t=>D(be,t,()=>{let e=R(),s=new Cs(t);return s.onmessage=n=>e.forEach(o=>o(n.data,"broadcastchannel")),{bc:s,subs:e}}),Ue=(t,e)=>(Lt(t).subs.add(e),e),Se=(t,e)=>{let s=Lt(t),n=s.subs.delete(e);return n&&s.subs.size===0&&(s.bc.close(),be.delete(t)),n},B=(t,e,s=null)=>{let n=Lt(t);n.bc.postMessage(e),n.subs.forEach(o=>o(e,s))}});var T,Ft=i(()=>{T=Date.now});var L,Te,ot,_e,rt,Dt,Es,Be,Ce,ks,Ve,Ee=i(()=>{tt();v();L=X(V(),1),Te=0,ot=1,_e=2,rt=(t,e)=>{c(t,Te);let s=L.encodeStateVector(e);b(t,s)},Dt=(t,e,s)=>{c(t,ot),b(t,L.encodeStateAsUpdate(e,s))},Es=(t,e,s)=>Dt(e,s,N(t)),Be=(t,e,s)=>{try{L.applyUpdate(e,N(t),s)}catch(n){console.error("Caught error while handling a Yjs update",n)}},Ce=(t,e)=>{c(t,_e),b(t,e)},ks=Be,Ve=(t,e,s,n)=>{let o=y(t);switch(o){case Te:Es(t,e,s);break;case ot:Be(t,s,n);break;case _e:ks(t,s,n);break;default:throw new Error("Unknown message type")}return o}});var on,Ms,ke,Pe=i(()=>{on=X(V(),1);v();Ms=0,ke=(t,e,s)=>{switch(y(t)){case Ms:s(e,st(t))}}});var it,ct,Rt=i(()=>{$();ht();Gt();it=class{constructor(){this._observers=w()}on(e,s){return D(this._observers,e,R).add(s),s}once(e,s){let n=(...o)=>{this.off(e,n),s(...o)};this.on(e,n)}off(e,s){let n=this._observers.get(e);n!==void 0&&(n.delete(s),n.size===0&&this._observers.delete(e))}emit(e,s){return ut((this._observers.get(e)||w()).values()).forEach(n=>n(...s))}destroy(){this._observers=w()}},ct=class{constructor(){this._observers=w()}on(e,s){D(this._observers,e,R).add(s)}once(e,s){let n=(...o)=>{this.off(e,n),s(...o)};this.on(e,n)}off(e,s){let n=this._observers.get(e);n!==void 0&&(n.delete(s),n.size===0&&this._observers.delete(e))}emit(e,s){return ut((this._observers.get(e)||w()).values()).forEach(n=>n(...s))}destroy(){this._observers=w()}}});var an,Ot,at,lt,F,Me,Ne=i(()=>{tt();v();Ft();j();Rt();At();an=X(V(),1),Ot=3e4,at=class extends ct{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{let s=T();this.getLocalState()!==null&&Ot/2<=s-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());let n=[];this.meta.forEach((o,r)=>{r!==this.clientID&&Ot<=s-o.lastUpdated&&this.states.has(r)&&n.push(r)}),n.length>0&&lt(this,n,"timeout")},M(Ot/10)),e.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){let s=this.clientID,n=this.meta.get(s),o=n===void 0?0:n.clock+1,r=this.states.get(s);e===null?this.states.delete(s):this.states.set(s,e),this.meta.set(s,{clock:o,lastUpdated:T()});let a=[],U=[],g=[],A=[];e===null?A.push(s):r==null?e!=null&&a.push(s):(U.push(s),P(r,e)||g.push(s)),(a.length>0||g.length>0||A.length>0)&&this.emit("change",[{added:a,updated:g,removed:A},"local"]),this.emit("update",[{added:a,updated:U,removed:A},"local"])}setLocalStateField(e,s){let n=this.getLocalState();n!==null&&this.setLocalState({...n,[e]:s})}getStates(){return this.states}},lt=(t,e,s)=>{let n=[];for(let o=0;o<e.length;o++){let r=e[o];if(t.states.has(r)){if(t.states.delete(r),r===t.clientID){let a=t.meta.get(r);t.meta.set(r,{clock:a.clock+1,lastUpdated:T()})}n.push(r)}}n.length>0&&(t.emit("change",[{added:[],updated:[],removed:n},s]),t.emit("update",[{added:[],updated:[],removed:n},s]))},F=(t,e,s=t.states)=>{let n=e.length,o=u();c(o,n);for(let r=0;r<n;r++){let a=e[r],U=s.get(a)||null,g=t.meta.get(a).clock;c(o,a),c(o,g),ue(o,JSON.stringify(U))}return p(o)},Me=(t,e,s)=>{let n=et(e),o=T(),r=[],a=[],U=[],g=[],A=y(n);for(let H=0;H<A;H++){let m=y(n),f=y(n),d=JSON.parse(st(n)),x=t.meta.get(m),Yt=t.states.get(m),Y=x===void 0?0:x.clock;(Y<f||Y===f&&d===null&&t.states.has(m))&&(d===null?m===t.clientID&&t.getLocalState()!=null?f++:t.states.delete(m):t.states.set(m,d),t.meta.set(m,{clock:f,lastUpdated:o}),x===void 0&&d!==null?r.push(m):x!==void 0&&d===null?g.push(m):d!==null&&(P(d,Yt)||U.push(m),a.push(m)))}(r.length>0||U.length>0||g.length>0)&&t.emit("change",[{added:r,updated:U,removed:g},s]),(r.length>0||a.length>0||g.length>0)&&t.emit("update",[{added:r,updated:a,removed:g},s])}});var Le,Fe=i(()=>{Ut();Le=t=>ee(t,(e,s)=>`${encodeURIComponent(s)}=${encodeURIComponent(e)}`).join("&")});var ve={};Ge(ve,{WebsocketProvider:()=>qt,messageAuth:()=>Re,messageAwareness:()=>C,messageQueryAwareness:()=>Ht,messageSync:()=>_});var ln,_,Ht,C,Re,q,De,Ds,Oe,vt,je,jt,qt,qe=i(()=>{ln=X(V(),1);Ae();Ft();tt();v();Ee();Pe();Ne();Rt();j();Fe();Bt();_=0,Ht=3,C=1,Re=2,q=[];q[_]=(t,e,s,n,o)=>{c(t,_);let r=Ve(e,t,s.doc,s);n&&r===ot&&!s.synced&&(s.synced=!0)};q[Ht]=(t,e,s,n,o)=>{c(t,C),b(t,F(s.awareness,Array.from(s.awareness.getStates().keys())))};q[C]=(t,e,s,n,o)=>{Me(s.awareness,N(e),s)};q[Re]=(t,e,s,n,o)=>{ke(e,s.doc,(r,a)=>Ds(s,a))};De=3e4,Ds=(t,e)=>console.warn(`Permission denied to access ${t.url}.
${e}`),Oe=(t,e,s)=>{let n=et(e),o=u(),r=y(n),a=t.messageHandlers[r];return a?a(o,n,t,s,r):console.error("Unable to compute message"),o},vt=(t,e,s)=>{e===t.ws&&(t.emit("connection-close",[s,t]),t.ws=null,e.close(),t.wsconnecting=!1,t.wsconnected?(t.wsconnected=!1,t.synced=!1,lt(t.awareness,Array.from(t.awareness.getStates().keys()).filter(n=>n!==t.doc.clientID),t),t.emit("status",[{status:"disconnected"}])):t.wsUnsuccessfulReconnects++,setTimeout(je,Q(pe(2,t.wsUnsuccessfulReconnects)*100,t.maxBackoffTime),t))},je=t=>{if(t.shouldConnect&&t.ws===null){let e=new t._WS(t.url,t.protocols);e.binaryType="arraybuffer",t.ws=e,t.wsconnecting=!0,t.wsconnected=!1,t.synced=!1,e.onmessage=s=>{t.wsLastMessageReceived=T();let n=Oe(t,new Uint8Array(s.data),!0);K(n)>1&&e.send(p(n))},e.onerror=s=>{t.emit("connection-error",[s,t])},e.onclose=s=>{vt(t,e,s)},e.onopen=()=>{t.wsLastMessageReceived=T(),t.wsconnecting=!1,t.wsconnected=!0,t.wsUnsuccessfulReconnects=0,t.emit("status",[{status:"connected"}]);let s=u();if(c(s,_),rt(s,t.doc),e.send(p(s)),t.awareness.getLocalState()!==null){let n=u();c(n,C),b(n,F(t.awareness,[t.doc.clientID])),e.send(p(n))}},t.emit("status",[{status:"connecting"}])}},jt=(t,e)=>{let s=t.ws;t.wsconnected&&s&&s.readyState===s.OPEN&&s.send(e),t.bcconnected&&B(t.bcChannel,e,t)},qt=class extends it{constructor(e,s,n,{connect:o=!0,awareness:r=new at(n),params:a={},protocols:U=[],WebSocketPolyfill:g=WebSocket,resyncInterval:A=-1,maxBackoffTime:H=2500,disableBc:m=!1}={}){for(super();e[e.length-1]==="/";)e=e.slice(0,e.length-1);this.serverUrl=e,this.bcChannel=e+"/"+s,this.maxBackoffTime=H,this.params=a,this.protocols=U,this.roomname=s,this.doc=n,this._WS=g,this.awareness=r,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=m,this.wsUnsuccessfulReconnects=0,this.messageHandlers=q.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=o,this._resyncInterval=0,A>0&&(this._resyncInterval=setInterval(()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){let f=u();c(f,_),rt(f,n),this.ws.send(p(f))}},A)),this._bcSubscriber=(f,d)=>{if(d!==this){let x=Oe(this,new Uint8Array(f),!1);K(x)>1&&B(this.bcChannel,p(x),this)}},this._updateHandler=(f,d)=>{if(d!==this){let x=u();c(x,_),Ce(x,f),jt(this,p(x))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:f,updated:d,removed:x},Yt)=>{let Y=f.concat(d).concat(x),pt=u();c(pt,C),b(pt,F(r,Y)),jt(this,p(pt))},this._exitHandler=()=>{lt(this.awareness,[n.clientID],"app closed")},I&&typeof process<"u"&&process.on("exit",this._exitHandler),r.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval(()=>{this.wsconnected&&De<T()-this.wsLastMessageReceived&&vt(this,this.ws,null)},De/10),o&&this.connect()}get url(){let e=Le(this.params);return this.serverUrl+"/"+this.roomname+(e.length===0?"":"?"+e)}get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){this._resyncInterval!==0&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),I&&typeof process<"u"&&process.off("exit",this._exitHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(Ue(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);let e=u();c(e,_),rt(e,this.doc),B(this.bcChannel,p(e),this);let s=u();c(s,_),Dt(s,this.doc),B(this.bcChannel,p(s),this);let n=u();c(n,Ht),B(this.bcChannel,p(n),this);let o=u();c(o,C),b(o,F(this.awareness,[this.doc.clientID])),B(this.bcChannel,p(o),this)}disconnectBc(){let e=u();c(e,C),b(e,F(this.awareness,[this.doc.clientID],new Map)),jt(this,p(e)),this.bcconnected&&(Se(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),this.ws!==null&&vt(this,this.ws,null)}connect(){this.shouldConnect=!0,!this.wsconnected&&this.ws===null&&(je(this),this.connectBc())}}});var Os=zt(()=>{var{WebsocketProvider:Rs}=(qe(),We(ve));typeof window<"u"&&(window.WebsocketProvider=Rs)});Os();})();
